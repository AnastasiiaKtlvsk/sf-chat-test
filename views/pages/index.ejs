
<html>
    <body>
        <h1>Letâ€™s start chatting...</h1>
        <br />
        Click the button to start a chat.
        <br />
        <span id="  " style="display:none"></span>
    </body>
    <head>

        <style type='text/css'>
               .embeddedServiceHelpButton .helpButton .uiButton {
                    background-color: #F7E918;
                    font-family: "Arial", sans-serif;
                }
                .embeddedServiceHelpButton .helpButton .uiButton:focus {
                    outline: 1px solid #F7E918;
                }
            
                .embeddedServiceHelpButton .uiButton .helpButtonLabel .message{
                    overflow: visible !important;
                }
            
                .embeddedServiceLiveAgentStateChatHeader:not(.alert) .message{
                    max-width: 82%;
                    overflow: visible;
                    white-space: normal;
                }
            
                .embeddedServiceLiveAgentStateChatHeader .content {
                    height: 100%;
                }
            
                .message{
                    background-color: transparent;
                    border-style: hidden;
                    border-width: 0px;
                    color: #888b0a;
                    font-size: small;
                    font-weight: bold;
                }
            
                
                .nascondi {
                    display: none !important;
                }
            
            
                
            
                .loadingcenter {
            
                position: fixed;
                top: 50%;
                left: 50%;
                margin-top: -100px;
                margin-left: -200px;
            }
        </style>

        <script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
        <script type="text/javascript">

            var waitForButtonEnabled = function(){
                var observer = new MutationObserver(function (mutations, me) {
                var button = document.getElementsByClassName('uiButton helpButtonEnabled')[0];
                if (button) {
                    me.disconnect(); 
                    button.click();
                    return;
                }
                });
        
                observer.observe(document, {
                        childList: true,
                        subtree: true
                    });
                }
        
            waitForButtonEnabled();
        
        </script>
        <script type='text/javascript'>

            var chatUuid;
            
            window.addEventListener('hashchange', e =>{
                var url = window.location.href;
                embedded_svc.liveAgentAPI.sendCustomEvent(chatUuid  ,url);
            });        
            
            var initESW = function(gslbBaseURL) {
                embedded_svc.settings.displayHelpButton = true; //Or false
                embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'

                
                embedded_svc.settings.enabledFeatures = ['LiveAgent'];
                embedded_svc.settings.entryFeature = 'LiveAgent';
                embedded_svc.settings.autoOpenPostChat = true;

                
                embedded_svc.settings.extraPrechatFormDetails = [
                    {"label":"Email",       "transcriptFields": ["PreChat_Form_Email__c"]},
                    {"label":"Phone",       "transcriptFields": ["PreChat_Form_Phone__c"]},
                    {"label":"Last Name",   "transcriptFields": ["PreChat_Form_Name__c"]},
                    {"label":"Subject",     "transcriptFields": ["Prechat_Form_Subject__c"]},
                    {"label":"Start Url",   "transcriptFields": ["Prechat_StartUrl__c"], "value": window.location.href,"displayToAgent":false}                    
                ]; 

                embedded_svc.addEventHandler("onChatEstablished", function(data) {
                    console.log("onChatEstablished event was fired.  liveAgentSessionKey was " + data.liveAgentSessionKey);
                        chatUuid = data.liveAgentSessionKey;
                });

                embedded_svc.init(
                    'https://parimatch--staging.my.salesforce.com',
                    'https://staging-parimatch.cs102.force.com',
                    gslbBaseURL,
                    '00D1j0000008d3o',
                    'Chat_Deployment_Desktop',
                    {
                        baseLiveAgentContentURL: 'https://c.la1-c1cs-cdg.salesforceliveagent.com/content',
                        deploymentId: '5722p0000000G2t',
                        buttonId: '5731j0000008OzO',
                        baseLiveAgentURL: 'https://d.la1-c1cs-cdg.salesforceliveagent.com/chat',
                        eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I2p000000kBNSEA2_170a5e33e28',
                        isOfflineSupportEnabled: false
                    }
                );
            };
            

            if (!window.embedded_svc) {
                var s = document.createElement('script');
                s.setAttribute('src', 'https://parimatch--staging.my.salesforce.com/embeddedservice/5.0/esw.min.js');
                s.onload = function() {
                    initESW(null);
                };
                document.body.appendChild(s);
            } else {
                initESW('https://service.force.com');
            }

            
        </script>
    </head>
    
  


</html>

